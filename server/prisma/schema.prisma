datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id         String   @id
  email      String
  signInName String
  createdAt  DateTime
  tasks      Task[]
}

model Task {
  id        String   @id
  label     String
  done      Boolean
  imageKey  String?
  createdAt DateTime
  Author    User     @relation(fields: [authorId], references: [id])
  authorId  String
}

model Novel {
  id                         String      @id
  workId                     Int
  title                      String
  titleReading               String //読み仮名
  sortReading                String? //ソート用に濁点・小文字をなくしたもの
  publicationDate            String
  lastUpdateDate             String
  cardUrl                    String
  authorSurname              String
  authorGivenName            String? ///ないケースもある 例: 文科省
  authorSurnameReading       String
  authorGivenNameReading     String?
  authorSurnameSortReading   String
  authorGivenNameSortReading String?
  authorSurnameRomaji        String
  authorGivenNameRomaji      String?
  characterCount             Float?
  openingSentence            String?
  totalAccessCount           Int
  htmlFileUrl                String
  Paragraph                  Paragraph[]
  Voice                      Voice[]
}

model Paragraph {
  novelId  String
  index    Int
  content  String
  imageKey String
  Novel    Novel  @relation(fields: [novelId], references: [id])

  @@id([novelId, index])
}

model Voice {
  novelId  String
  index    Int
  speaker  Int
  voiceKey String
  Novel    Novel  @relation(fields: [novelId], references: [id])

  @@id([novelId, index])
}
